{% extends "base.html" %}

{% block title %}Dashboard - To-Do App{% endblock %}

{% block content %}
  <!-- ðŸ”” Flash Messages -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <p style="color: {% if category == 'success' %}green{% elif category == 'danger' %}red{% else %}orange{% endif %};">
          {{ message }}
        </p>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <!-- ðŸ‘‹ Welcome Message -->
  <h2>Welcome, {{ user }}!</h2>

  <!-- ðŸšª Logout Button -->
  <a href="/logout"><button>Logout</button></a>

  <hr>

  <h3>Add New Task</h3>
  <form method="POST" action="/add-task">
    <label>Title:</label><br>
    <input type="text" name="title" required><br><br>
  
    <label>Description:</label><br>
    <textarea name="description" rows="3" cols="30" placeholder="Optional"></textarea><br><br>
  
    <button type="submit">Create Task</button>
  </form>
  
  <hr>
  

  <!-- ðŸ“‹ Tasks Placeholder -->
  <h3>Your Tasks</h3>

  {% if tasks %}
    <ul>
      {% for task in tasks %}
        <li>
          <strong>{{ task.title }}</strong><br>
          {{ task.description }}<br>
          <small>{{ task.created_at.strftime('%Y-%m-%d %H:%M') }}</small>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No tasks yet.</p>
  {% endif %}

{% endblock %}
